graph TB
    subgraph Browser["ğŸ–¥ï¸ User Browser (React)"]
        FE["Frontend<br/>React 19 + TypeScript<br/>Vite 7"]
    end

    subgraph CloudRun["â˜ï¸ Google Cloud Run"]
        API["FastAPI Backend<br/>Port 8080<br/>REST + SSE Streaming"]

        subgraph Pipeline["ADK Sequential Pipeline"]
            BA["ğŸ” Brand Analyst Agent<br/>URL Scraping + Brand DNA<br/>Colors, Tone, Audience"]
            STR["ğŸ“… Strategy Agent<br/>7-Day Content Calendar<br/>Pillar-Based Planning"]
            CC["âœ¨ Content Creator Agent<br/>Gemini Interleaved Output<br/>Text + Image Together"]
            RA["ğŸ” Review Agent<br/>Brand Alignment Check<br/>Revised Captions"]
        end

        subgraph Support["Supporting Agents"]
            SVA["ğŸ—£ï¸ Social Voice Agent<br/>Per-Platform Voice Analysis<br/>LinkedIn / Instagram / X"]
            VC["ğŸ¯ Voice Coach<br/>Brand Voice Coaching<br/>Consistency Scoring"]
            VID["ğŸ¬ Video Creator<br/>Veo 3.1 Generation<br/>Reels / TikTok Clips"]
            VR["âœ‚ï¸ Video Repurpose Agent<br/>Clip Extraction<br/>Platform-Specific Edits"]
        end

        subgraph Tools["Agent Tools"]
            WS["ğŸŒ Web Scraper<br/>httpx + BeautifulSoup"]
            BT["ğŸ·ï¸ Brand Tools<br/>ADK Tool Wrappers"]
            BU["ğŸ’° Budget Tracker<br/>Per-Session Cost Caps"]
        end
    end

    subgraph GCP["Google Cloud Platform"]
        FS[("ğŸ”¥ Cloud Firestore<br/>Brand Profiles<br/>Content Plans + Posts<br/>Video Jobs + Trends")]
        GCS[("ğŸ“¦ Cloud Storage<br/>Generated Images<br/>Uploaded Assets<br/>Video Clips")]
    end

    subgraph Gemini["Google Gemini API"]
        GFlash["gemini-2.5-flash<br/>generateContent<br/>responseModalities:<br/>TEXT + IMAGE"]
    end

    FE <-->|"REST + SSE<br/>/api/*"| API

    API --> BA
    BA --> STR
    STR --> CC
    CC --> RA

    API --> SVA
    API --> VC
    API --> VID
    API --> VR

    BA --> WS
    BA --> BT
    CC --> BU
    VID --> BU

    BA -->|"Brand Analysis"| GFlash
    STR -->|"Strategy Planning"| GFlash
    CC -->|"Interleaved<br/>Text + Image"| GFlash
    RA -->|"Review + Revise"| GFlash
    SVA -->|"Voice Analysis"| GFlash
    VC -->|"Voice Coaching"| GFlash

    API --> FS
    API --> GCS
    CC -->|"Store Images"| GCS
    VID -->|"Store Video"| GCS

    classDef browser fill:#1a1a2e,stroke:#e94560,color:#fff
    classDef cloud fill:#0f3460,stroke:#16213e,color:#fff
    classDef pipeline fill:#533483,stroke:#e94560,color:#fff
    classDef support fill:#2d4059,stroke:#ea5455,color:#fff
    classDef tools fill:#3c4043,stroke:#8ab4f8,color:#fff
    classDef gcp fill:#4285f4,stroke:#1a73e8,color:#fff
    classDef gemini fill:#1e88e5,stroke:#1565c0,color:#fff

    class FE browser
    class API cloud
    class BA,STR,CC,RA pipeline
    class SVA,VC,VID,VR support
    class WS,BT,BU tools
    class FS,GCS gcp
    class GFlash gemini
